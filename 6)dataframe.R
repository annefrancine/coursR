# Remarque: si vous rencontrez des problemes d'accentuation, consultez ce lien:
# https://support.rstudio.com/hc/en-us/articles/200532197-Character-Encoding

getwd()


#Le type data.frame est un type specifique dedie à la manipulation
# d'ensemble de données de type « individus x variables » (lignes x colonnes).

# On peut le voir comme une liste de vecteurs de meme longueur
# (numerique, factor, etc.). Avec des fonctionnalites spécifiques

# On peut aussi le voir comme une matrice. Cette specificite peut
# etre exploitée intensivement lorsqu'il s'agit d'acceder aux valeurs


# créer un dataframe vide
?data.frame
df <- data.frame()
class(df)
df

# creer vecteurs vides

nom <- character()
age <- numeric()
item <- numeric()
code <- integer()

df <- data.frame(c(nom, age, item, code))
df

# creer vecteurs

pays <- c("France", "Allemagne", "Argentine", "Irlande", "Bresil")
nom <- c("Bruno", "Tiago", "Amanda", "Bianca", "Marta")
taille <- c(1.88, 1.76, 1.53, 1.69, 1.68)
code <- c(5001, 2183, 4702, 7965, 8890)

#creation d'un dataframe avec plusieurs vecteurs

recherche <- data.frame(pays, nom, taille, code)
recherche

# Ajout d'un nouveau vecteur  à un dataframe existant
yeux <-c("noisette", "marron vert", "bleu", "marron", "bleu")
rec2 <- cbind(recherche, yeux)
rec2


#informations sur le dataframe
str(rec2)
dim(rec2)
length(rec2)
View(rec2)
head(rec2)
dimnames(rec2)
colnames(rec2)
rownames(rec2)

#Acces aux elements d'un dataframe

rec2$pays
rec2$nom

# extraire une valeur unique
rec2[1,1]
rec2[3,2]

# nombre de lignes et de colonnes

?nrow
?ncol
nrow(rec2)
ncol(rec2)

# Data frames built-in 
?data
data()
?mtcars
mtcars
View(mtcars)
head(mtcars)
tail(mtcars)

# filtrage des informations
rec2[taille < 1.60,]
rec2[taille < 1.60, c('code', 'yeux')]
rec2

#Nommer dataframes
colnames(rec2) <- c("Var 1", "Var 2", "Var 3", "Var 4", "Var 5")
rownames(rec2) <- c("Obs 1", "Obs 2", "Obs 3", "Obs 4", "Obs 5")
rec2

# La fonction by() permet d'appliquer un calcul en fonction des catÃ©gories d'une ou plusieurs colonne
data(iris)
View(iris)
by(iris[,1],iris[,5],mean) # Faire la moyenne de iris[,1] en fonction des catÃ©gories de iris[,5]

# Fusionner des tableaux
# merge() permet des fusions de tableaux selon des critÃ¨res et des dimensions

x <- data.frame(k1 = c(NA,NA,3,4,5), k2 = c(1,NA,NA,4,5), data = 1:5)
y <- data.frame(k1 = c(NA,2,NA,4,5), k2 = c(NA,NA,3,4,5), data = 2:6)
x
y

merge(x, y, by = c("k1","k2"))
